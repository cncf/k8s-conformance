# Conformance Results

These conformance test results are generated by
[continuously running CI jobs][conformance-jobs] and on display
on the [testgrid conformance dashboard][conformance-dashboard]

These exact results were taken from [this job run][ci-job]:
- [build-log.txt] - this is the source for `e2e.log` for this submission
- [junit_01.xml]

# To manually reproduce

To reproduce on your own setup, you'll need to:

- ensure `gcloud` is configured
- ensure you have a GCP project setup (`your-gcp-project` below)
- ensure you have keys to a GCP service account (`/etc/service-account/service-account.json` below)
- ensure you have GNU `sed` installed
- ensure `go` is properly setup
- `go get k8s.io/test-infra/kubetest`
- clone `kubernetes/kubernetes`, and then

```console
$ kubetest \
  --dump=./_artifacts \
  --gcp-service-account=/etc/service-account/service-account.json \
  --up \
  --down \
  --test \
  --provider=gce \
  --cluster=bootstrap-e2e \
  --gcp-network=bootstrap-e2e \
  --extract=release/stable-1.10 \
  --gcp-master-image=gci \
  --gcp-node-image=gci \
  --gcp-zone=us-central1-f \
  --gcp-project=your-gcp-project \
  --test_args=--ginkgo.focus=\\[Conformance\\] \
  --timeout=200m | tee ./build-log.txt
```

To convert `build-log.txt` (either manually generated, or downloaded 
from our CI) to the `e2e.log` format expected by CNCF reviewers, run
the following command, which will:
- remove color codes
- strip prepended timestamps
- truncate

```console
$ <build-log.txt sed \
    -e 's/\x1b\[[0-9;]*m//g' \
    -e 's/^[IWE][0-9]\{4\} [0-9]\{2\}:[0-9]\{2\}:[0-9]\{2\}\.[0-9]\{3\}\] //' \
    -e '/^SUCCESS!/q' \
    >e2e.log
```

Then grab the following files:

- `./e2e.log`
- `./_artifacts/junit_01.xml`

[conformance-dashboard]: https://k8s-testgrid.appspot.com/conformance-gce#GCE,%20v1.9%20(release)
[conformance-jobs]: https://github.com/kubernetes/test-infra/tree/master/config/jobs/kubernetes/sig-gcp/gce-conformance.yaml
[ci-job]: https://k8s-gubernator.appspot.com/build/kubernetes-jenkins/logs/ci-kubernetes-gce-conformance-stable-1-10/504
[build-log.txt]: https://storage.googleapis.com/kubernetes-jenkins/logs/ci-kubernetes-gce-conformance-stable-1-10/504/build-log.txt
[junit_01.xml]:  https://storage.googleapis.com/kubernetes-jenkins/logs/ci-kubernetes-gce-conformance-stable-1-10/504/artifacts/junit_01.xml
